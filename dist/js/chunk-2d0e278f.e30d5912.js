(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e278f"],{"7f9c":function(s,t,a){"use strict";a.r(t);var e=function(){var s=this,t=s.$createElement;s._self._c;return s._m(0)},r=[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("section",[a("h1",[s._v("React-Webpack多入口多出口")]),a("h2",[s._v("1、背景")]),a("p",[s._v("直接用了create-react-app，但是需要更改配置，可以在终端执行：yarn eject后会在根目录下生成一个config文件夹，里面是webpack的配置文件，可以进行自定义配置")]),a("h2",[s._v("2、多入口多出口js")]),a("h3",[s._v("默认配置--webpack.config.dev.js")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v(" entry: [\n    "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v(".resolve("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'./polyfills'")]),s._v("),\n    "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v(".resolve("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'react-dev-utils/webpackHotDevClient'")]),s._v("),\n    paths.appIndexJs,\n  ],\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("output")]),s._v(": {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pathinfo")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("filename")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'static/js/app.js'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("publicPath")]),s._v(": publicPath,\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("devtoolModuleFilenameTemplate")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("info")]),s._v(" =>")]),s._v("\n      path.resolve(info.absoluteResourcePath).replace("),a("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v("/\\\\/g")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/'")]),s._v("),\n  },\n")])]),a("h3",[s._v("修改配置--webpack.config.dev.js")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v(" entry: {\n    "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'app'")]),s._v(": [\n      "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v(".resolve("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'./polyfills'")]),s._v("),\n      "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v(".resolve("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'react-dev-utils/webpackHotDevClient'")]),s._v("),\n      paths.appIndexJs,\n    ],\n    "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'tag'")]),s._v(": [\n      "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v(".resolve("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'./polyfills'")]),s._v("),\n      "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v(".resolve("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'react-dev-utils/webpackHotDevClient'")]),s._v("),\n      paths.tagIndexJs,  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 在paths文件下添加的另一个入口地址")]),s._v("\n    ],\n  },\n  "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("output")]),s._v(": {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pathinfo")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("filename")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'static/js/[name].js'")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("publicPath")]),s._v(": publicPath,\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("devtoolModuleFilenameTemplate")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("info")]),s._v(" =>")]),s._v("\n      path.resolve(info.absoluteResourcePath).replace("),a("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v("/\\\\/g")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/'")]),s._v("),\n  },\n")])]),a("h3",[s._v("PS:")]),a("ul",[a("li",[s._v("多入口时entry为一个对象，每个key代表一个入口。")]),a("li",[s._v("output中的filename使用[name]区分输出名，就会根据entry分别编译出对应的js文件。")])]),a("h2",[s._v("3、多入口多出口html")]),a("p",[s._v("每调一次HtmlWebpackPlugin就会生成一次HTML页面，所以这里可以通过添加HtmlWebpackPlugin来生成多出口html。")]),a("h3",[s._v("默认配置--webpack.config.dev.js")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" HtmlWebpackPlugin({\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("inject")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("template")]),s._v(": paths.appHtml,\n}),\n")])]),a("h3",[s._v("修改配置--webpack.config.dev.js")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" HtmlWebpackPlugin({\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("inject")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("template")]),s._v(": paths.appHtml,\n}),\n"),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" HtmlWebpackPlugin({\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("inject")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("template")]),s._v(": paths.tagHtml, "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//另一个html地址")]),s._v("\n    filename: "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'tag.html'")]),s._v("\n}),\n")])]),a("h3",[s._v("PS:")]),a("ul",[a("li",[s._v("HtmlWebpackPlugin的参数还有一个chunks属性，指明哪些webpack入口的js会被注入到这个HTML页面。如果不配置，则将所有entry的JS文件都注入HTML。")]),a("li",[s._v("filename: 指明生成的HTML路径，如果不配置就是dist/index.html。但是新增的需要配置filename，避免与第一个入口相互覆盖。")])]),a("h3",[s._v("注意：")]),a("p",[s._v("此时已经可以生成多出口html，但是start启动后，在浏览器访问不论是什么路径，是/index.html还是/tag.html，展示的都是index.html的内容，应该是http服务将请求重定向到了/index.html，所以需要修改webpackDevServer.config.js")]),a("h4",[s._v("默认配置：")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("historyApiFallback: {\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Paths with dots should still use the history fallback.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// See https://github.com/facebookincubator/create-react-app/issues/387.")]),s._v("\n    disableDotRule: "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n},\n")])]),a("h4",[s._v("修改配置：")]),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("historyApiFallback: {\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Paths with dots should still use the history fallback.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// See https://github.com/facebookincubator/create-react-app/issues/387.")]),s._v("\n    disableDotRule: "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("rewrites")]),s._v(": [\n      { "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("from")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v("/^\\/tag.html/")]),s._v(", "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("to")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/dist/tag.html'")]),s._v(" }, "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 将/tag.html路径重定向到HtmlWebpackPlugin输出的html路径")]),s._v("\n    ]\n},\n")])]),a("h2",[s._v("4、生产环境")]),a("p",[s._v("生产环境同开发环境类似配置")])])}],l=a("2877"),p={},n=Object(l["a"])(p,e,r,!1,null,null,null);t["default"]=n.exports}}]);